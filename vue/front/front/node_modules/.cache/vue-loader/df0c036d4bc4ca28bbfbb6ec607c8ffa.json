{"remainingRequest":"C:\\Users\\莫初\\Desktop\\vue\\front\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\莫初\\Desktop\\vue\\front\\front\\src\\pages\\shop-order\\confirm.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\莫初\\Desktop\\vue\\front\\front\\src\\pages\\shop-order\\confirm.vue","mtime":1680934332000},{"path":"C:\\Users\\莫初\\Desktop\\vue\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\莫初\\Desktop\\vue\\front\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\莫初\\Desktop\\vue\\front\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\莫初\\Desktop\\vue\\front\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIGltcG9ydCBjb25maWcgZnJvbSAnQC9jb25maWcvY29uZmlnJw0KICBleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGJhc2VVcmw6IGNvbmZpZy5iYXNlVXJsLA0KICAgICAgICB1c2VyVGFibGVOYW1lOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnVXNlclRhYmxlTmFtZScpLA0KICAgICAgICBhZGRyZXNzTGlzdDogW10sDQogICAgICAgIHRhYmxlRGF0YTogW10sDQogICAgICAgIGN1cnJlbnRSb3c6IG51bGwsDQogICAgICAgIHJhZGlvOiAtMSwNCiAgICAgICAgb3JkZXI6IHsNCiAgICAgICAgICBhZGRyZXNzOiAiIiwNCiAgICAgICAgICBidXludW1iZXI6IDAsDQogICAgICAgICAgY29uc2lnbmVlOiAnJywNCiAgICAgICAgICBkaXNjb3VudHByaWNlOiAwLA0KICAgICAgICAgIGRpc2NvdW50dG90YWw6IDAsDQogICAgICAgICAgZ29vZGlkOiAwLA0KICAgICAgICAgIGdvb2RuYW1lOiAiIiwNCiAgICAgICAgICBvcmRlcmlkOiAiIiwNCiAgICAgICAgICBwaWN0dXJlOiAiIiwNCiAgICAgICAgICBwcmljZTogMCwNCiAgICAgICAgICBzdGF0dXM6ICLmnKrmlK/ku5giLA0KICAgICAgICAgIHRhYmxlbmFtZTogIiIsDQogICAgICAgICAgdGVsOiAiIiwNCiAgICAgICAgICB0b3RhbDogMCwNCiAgICAgICAgICB0eXBlOiAxLA0KICAgICAgICAgIHVzZXJpZDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJpZCcpDQogICAgICAgIH0sDQogICAgICAgIHVzZXI6IHt9LA0KICAgICAgICB0eXBlOiAwLA0KICAgICAgICBzZWF0OiAwLA0KICAgICAgICBidXludW1iZXI6IDAsDQogICAgICAgIHJlbWFyazonJw0KICAgICAgfQ0KICAgIH0sDQogICAgY3JlYXRlZCgpIHsNCiAgICAgIGlmKHRoaXMuJHJvdXRlLnF1ZXJ5LnR5cGUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgIHRoaXMudHlwZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnR5cGU7DQogICAgICB9DQogICAgICBpZih0aGlzLiRyb3V0ZS5xdWVyeS5zZWF0ICE9IHVuZGVmaW5lZCkgew0KICAgICAgICB0aGlzLnNlYXQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5zZWF0Ow0KICAgICAgfQ0KICAgICAgaWYodGhpcy4kcm91dGUucXVlcnkudGFibGVuYW1lICE9IHVuZGVmaW5lZCkgew0KICAgICAgICB0aGlzLm9yZGVyLnRhYmxlbmFtZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnRhYmxlbmFtZTsNCiAgICAgIH0NCg0KICAgICAgdGhpcy5nZXRTZXNzaW9uKCk7DQogICAgICB0aGlzLmdldEFkZHJMaXN0KCk7DQogICAgICAvLyDojrflj5bllYblk4HotK3kubDnmoTmuIXljZXliJfooagNCiAgICAgIHZhciBvcmRlckdvb2RzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ29yZGVyR29vZHMnKQ0KICAgICAgLy8g6L2s5o2i5oiQanNvbuexu+Wei++8jGxvY2Fsc3RvcmFnZeS/neWtmOeahOaYr3N0cmluZ+aVsOaNrg0KICAgICAgdGhpcy50YWJsZURhdGEgPSBKU09OLnBhcnNlKG9yZGVyR29vZHMpOw0KICAgICAgdGhpcy50eXBlID0gdGhpcy4kcm91dGUucXVlcnkudHlwZTsNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgIGdldFNlc3Npb24oKSB7DQogICAgICAgIHRoaXMuJGh0dHAuZ2V0KGAke3RoaXMudXNlclRhYmxlTmFtZX0vc2Vzc2lvbmAsIHtlbXVsYXRlSlNPTjogdHJ1ZX0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PSAwKSB7DQogICAgICAgICAgICB0aGlzLnVzZXIgPSByZXMuZGF0YS5kYXRhOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9LA0KICAgICAgZ2V0Q3VycmVudFJvdyhpbmRleCkgew0KICAgICAgICB0aGlzLnJhZGlvID0gaW5kZXg744CADQogICAgICB9LA0KICAgICAgZ2V0QWRkckxpc3QoKSB7DQogICAgICAgIHRoaXMuJGh0dHAuZ2V0KCdhZGRyZXNzL2xpc3QnLCB7cGFyYW1zOiB7dXNlcmlkOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcmlkJyl9fSkudGhlbihyZXMgPT4gew0KICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDApIHsNCiAgICAgICAgICAgIHRoaXMuYWRkcmVzc0xpc3QgPSByZXMuZGF0YS5kYXRhLmxpc3Q7DQogICAgICAgICAgICB0aGlzLmFkZHJlc3NMaXN0LmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgICAgICAgIGlmIChpdGVtLmlzZGVmYXVsdCA9PSAn5pivJykgew0KICAgICAgICAgICAgICAgIHRoaXMucmFkaW8gPSBpbmRleDsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0sDQogICAgICBnZXRDYXJ0TGlzdCgpIHsNCiAgICAgICAgdGhpcy4kaHR0cC5nZXQoJ2NhcnQvbGlzdCcsIHtwYXJhbXM6IHtwYWdlOiAxLCBsaW1pdDogMTAwMCwgdXNlcmlkOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcmlkJyl9fSkudGhlbihyZXMgPT4gew0KICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDApIHsNCiAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLmRhdGEuZGF0YS5saXN0Ow0KICAgICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LmlkICE9IHVuZGVmaW5lZCB8fCB0aGlzLiRyb3V0ZS5xdWVyeS50eXBlICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IFtdOw0KICAgICAgICAgICAgICB0aGlzLmJ1eW51bWJlciA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmJ1eW51bWJlcjsNCiAgICAgICAgICAgICAgbGV0IGRldGFpbE9iaiA9IEpTT04ucGFyc2UodGhpcy4kcm91dGUucXVlcnkuZGV0YWlsT2JqKTsNCiAgICAgICAgICAgICAgdGhpcy5vcmRlci50YWJsZW5hbWUgPSB0aGlzLiRyb3V0ZS5xdWVyeS50YWJsZW5hbWU7DQogICAgICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS50eXBlID09IDEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5wdXNoKHsNCiAgICAgICAgICAgICAgICAgIGJ1eW51bWJlcjogdGhpcy5idXludW1iZXIsDQogICAgICAgICAgICAgICAgICBnb29kaWQ6IGRldGFpbE9iai5pZCwNCiAgICAgICAgICAgICAgICAgIHBpY3R1cmU6IHRoaXMuJHJvdXRlLnF1ZXJ5LnBpY3R1cmUsDQogICAgICAgICAgICAgICAgICBnb29kbmFtZTogdGhpcy4kcm91dGUucXVlcnkuZ29vZG5hbWUsDQogICAgICAgICAgICAgICAgICBnb29kdHlwZTogdGhpcy4kcm91dGUucXVlcnkuZ29vZHR5cGUsDQogICAgICAgICAgICAgICAgICB0YWJsZW5hbWU6IHRoaXMuJHJvdXRlLnF1ZXJ5LnRhYmxlbmFtZSwNCiAgICAgICAgICAgICAgICAgIHVzZXJpZDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJpZCcpLA0KICAgICAgICAgICAgICAgICAgcHJpY2U6IHRoaXMuJHJvdXRlLnF1ZXJ5LnByaWNlDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LnR5cGUgPT0gMikgew0KICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhLnB1c2goew0KICAgICAgICAgICAgICAgICAgYnV5bnVtYmVyOiB0aGlzLmJ1eW51bWJlciwNCiAgICAgICAgICAgICAgICAgIGdvb2RpZDogZGV0YWlsT2JqLmlkLA0KICAgICAgICAgICAgICAgICAgcGljdHVyZTogdGhpcy4kcm91dGUucXVlcnkucGljdHVyZSwNCiAgICAgICAgICAgICAgICAgIGdvb2RuYW1lOiB0aGlzLiRyb3V0ZS5xdWVyeS5nb29kbmFtZSwNCiAgICAgICAgICAgICAgICAgIHRhYmxlbmFtZTogdGhpcy4kcm91dGUucXVlcnkudGFibGVuYW1lLA0KICAgICAgICAgICAgICAgICAgdXNlcmlkOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcmlkJyksDQogICAgICAgICAgICAgICAgICBqZjogZGV0YWlsT2JqLmpmDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfSwNCiAgICAgIGhhbmRsZUNoYW5nZSh2YWx1ZSwgaW5kZXgsIGdvb2RpZCkgew0KICAgICAgICB0aGlzLiRodHRwLmdldChgJHt0aGlzLm9yZGVyLnRhYmxlbmFtZX0vZGV0YWlsLyR7Z29vZGlkfWApLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PSAwICYmIHZhbHVlID4gcmVzLmRhdGEuZGF0YS5vbmVsaW1pdHRpbWVzKSB7DQogICAgICAgICAgICB0aGlzLnRhYmxlRGF0YVtpbmRleF0uYnV5bnVtYmVyID0gLS12YWx1ZTsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOavj+S6uuWNleasoeWPquiDvei0reS5sCR7cmVzLmRhdGEuZGF0YS5vbmVsaW1pdHRpbWVzfeS7tmApOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9LA0KICAgICAgICAvLyDmraPluLjkuIvljZXvvIznlJ/miJDorqLljZXvvIzlh4/lsJHkvZnpop3vvIzmt7vliqDnp6/liIbvvIzlh4/lsJHlupPlrZjvvIzkv67mlLnnirbmgIHlt7LmlK/ku5gNCiAgICAgICAgcGF5Q2xpY2soKSB7DQoNCiAgICAgICAgICAgIC8vIOeUn+aIkOiuouWNlQ0KICAgICAgICAgICAgdGhpcy50YWJsZURhdGEuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICAvLyDojrflj5bllYblk4Hor6bmg4Xkv6Hmga8NCiAgICAgICAgICAgICAgICB0aGlzLiRodHRwLmdldChgJHtpdGVtLnRhYmxlbmFtZX0vaW5mby8ke2l0ZW0uZ29vZGlkfWApLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgLy8g6K6i5Y2V57yW5Y+3DQogICAgICAgICAgICAgICAgICAgIHZhciBvcmRlcklkID0gdGhpcy5jcmVhdGVPcmRlcigpOw0KICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhLmRhdGE7DQogICAgICAgICAgICAgICAgICAgIGRhdGEuYWxsbGltaXR0aW1lcyA9IGRhdGEuYWxsbGltaXR0aW1lcyAtIGl0ZW0uYnV5bnVtYmVyOw0KICAgICAgICAgICAgICAgICAgICAvLyDmm7TmlrDlupPlrZjkv6Hmga8NCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kaHR0cC5wb3N0KGAke2l0ZW0udGFibGVuYW1lfS91cGRhdGVgLCBkYXRhKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyDmt7vliqDorqLljZXkv6Hmga8NCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvcmRlciA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcmlkOiBvcmRlcklkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlbmFtZTogaXRlbS50YWJsZW5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcmlkOiB0aGlzLnVzZXIuaWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZGlkOiBpdGVtLmdvb2RpZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb29kbmFtZTogaXRlbS5nb29kbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb29kdHlwZTogaXRlbS5nb29kdHlwZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaWN0dXJlOiBpdGVtLnBpY3R1cmUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV5bnVtYmVyOiBpdGVtLmJ1eW51bWJlciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNjb3VudHByaWNlOiBpdGVtLnByaWNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiBpdGVtLnByaWNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsOiBpdGVtLnByaWNlICogaXRlbS5idXludW1iZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzY291bnR0b3RhbDogaXRlbS5wcmljZSAqIGl0ZW0uYnV5bnVtYmVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZT90aGlzLnR5cGU6MSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RvdGFsOiB0aGlzLnRvdGFsUHJpY2UsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtYXJrOiB0aGlzLnJlbWFyaywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICfmnKrmlK/ku5gnDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRodHRwLnBvc3QoJ29yZGVycy9hZGQnLCBvcmRlcikudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWHj+WwkeS9memine+8jOabtOaWsOiuouWNleeKtuaAgQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWIpOaWreS9memineaYr+WQpuWFhei2sw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChOdW1iZXIodGhpcy51c2VyLm1vbmV5KSA8IE51bWJlcihpdGVtLnByaWNlICogaXRlbS5idXludW1iZXIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+S9memineS4jei2s++8jOivt+WFiOWFheWAvCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDE1MDANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzor6XllYblk4HlrZjlnKjnp6/liIYNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5qZikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXIuamYgPSBOdW1iZXIodGhpcy51c2VyLmpmKSArIE51bWJlcihpdGVtLnByaWNlICogaXRlbS5idXludW1iZXIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXIubW9uZXkgPSB0aGlzLnVzZXIubW9uZXkgLSBpdGVtLnByaWNlICogaXRlbS5idXludW1iZXI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pu05paw55So5oi35L2Z6aKdDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kaHR0cC5wb3N0KGAke3RoaXMudXNlclRhYmxlTmFtZX0vdXBkYXRlYCwgdGhpcy51c2VyKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyLnN0YXR1cyA9ICflt7LmlK/ku5gnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcmlkOiBvcmRlcklkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogMSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0OiAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGh0dHAuZ2V0KCdvcmRlcnMvbGlzdCcsIHtwYXJhbXM6IHBhcmFtc30pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyLmlkID0gcmVzLmRhdGEuZGF0YS5saXN0WzBdLmlkOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kaHR0cC5wb3N0KGBvcmRlcnMvdXBkYXRlYCwgb3JkZXIpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDliKDpmaTotK3nianovabmlbDmja4o5aaC5p6c5piv6LSt54mp6L2m5LiL5Y2VKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGh0dHAucG9zdCgnY2FydC9kZWxldGUnLCBbaXRlbS5pZF0pLnRoZW4ocmVzID0+IHt9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+i0reS5sOaIkOWKnycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxNTAwLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U6ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvaW5kZXgvc2hvcC1vcmRlci9vcmRlcicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KDQogICAgICAgIC8vIOenr+WIhuWFkeaNou+8jOeUn+aIkOiuouWNle+8jOWHj+WwkeeUqOaIt+enr+WIhu+8jOWHj+WwkeW6k+WtmA0KICAgICAgICBqZkNsaWNrKCkgew0KDQogICAgICAgICAgICAvLyDnlJ/miJDorqLljZUNCiAgICAgICAgICAgIHRoaXMudGFibGVEYXRhLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgLy8g6K6i5Y2V57yW5Y+3DQogICAgICAgICAgICAgICAgdmFyIG9yZGVySWQgPSB0aGlzLmNyZWF0ZU9yZGVyKCk7DQogICAgICAgICAgICAgICAgdGhpcy4kaHR0cC5nZXQoYCR7aXRlbS50YWJsZW5hbWV9L2luZm8vJHtpdGVtLmdvb2RpZH1gKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGEuZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgLy8g5YeP5bCR5bqT5a2YDQogICAgICAgICAgICAgICAgICAgIGRhdGEuYWxsbGltaXR0aW1lcyA9IGRhdGEuYWxsbGltaXR0aW1lcyAtIGl0ZW0uYnV5bnVtYmVyOw0KICAgICAgICAgICAgICAgICAgICAvLyDmm7TmlrDlupPlrZjkv6Hmga8NCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kaHR0cC5wb3N0KGAke2l0ZW0udGFibGVuYW1lfS91cGRhdGVgLCBkYXRhKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyDliKTmlq3np6/liIbmmK/lkKblhYXotrMNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZXIuamYgPCB0aGlzLnRvdGFsUHJpY2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+enr+WIhuS4jei2s++8jOWFkeaNouWksei0pScsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxNTAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAvLyDmt7vliqDorqLljZXkv6Hmga8NCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvcmRlciA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcmlkOiBvcmRlcklkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlbmFtZTogaXRlbS50YWJsZW5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcmlkOiB0aGlzLnVzZXIuaWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZGlkOiBpdGVtLmdvb2RpZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb29kbmFtZTogaXRlbS5nb29kbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb29kdHlwZTogaXRlbS5nb29kdHlwZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaWN0dXJlOiBpdGVtLnBpY3R1cmUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV5bnVtYmVyOiBpdGVtLmJ1eW51bWJlciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNjb3VudHByaWNlOiBpdGVtLnByaWNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiBpdGVtLnByaWNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsOiBpdGVtLnByaWNlICogaXRlbS5idXludW1iZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzY291bnR0b3RhbDogaXRlbS5wcmljZSAqIGl0ZW0uYnV5bnVtYmVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IDIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWw6IHRoaXMudG90YWxQcmljZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICflt7LmlK/ku5gnDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRodHRwLnBvc3QoJ29yZGVycy9hZGQnLCBvcmRlcikudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXNlci5qZiA9IHRoaXMudXNlci5qZiAtIGl0ZW0ucHJpY2UgKiBpdGVtLmJ1eW51bWJlcjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmm7TmlrDnlKjmiLfkvZnpop0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRodHRwLnBvc3QoYCR7dGhpcy51c2VyVGFibGVOYW1lfS91cGRhdGVgLCB0aGlzLnVzZXIpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICflhZHmjaLmiJDlip8nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxNTAwLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlOiAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9pbmRleC9zaG9wLW9yZGVyL29yZGVyJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8g6YCJ5bqn5LiL5Y2VLOeUn+aIkOiuouWNle+8jOWHj+WwkeS9memine+8jOa3u+WKoOenr+WIhu+8jOWHj+WwkeW6k+WtmO+8jOS/ruaUueeKtuaAgeS4uuW3suaUr+S7mA0KICAgICAgICB4elBheUNsaWNrKCkgew0KICAgICAgICAgICAgLy8g55Sf5oiQ6K6i5Y2VDQogICAgICAgICAgICB0aGlzLnRhYmxlRGF0YS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgIC8vIOiuouWNlee8luWPtw0KICAgICAgICAgICAgICAgIHZhciBvcmRlcklkID0gdGhpcy5jcmVhdGVPcmRlcigpOw0KICAgICAgICAgICAgICAgIC8vIOiOt+WPluWVhuWTgeivpuaDheS/oeaBrw0KICAgICAgICAgICAgICAgIHRoaXMuJGh0dHAuZ2V0KGAke2l0ZW0udGFibGVuYW1lfS9pbmZvLyR7aXRlbS5nb29kaWR9YCkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhLmRhdGE7DQogICAgICAgICAgICAgICAgICAgIC8vIOWHj+WwkeW6k+WtmA0KICAgICAgICAgICAgICAgICAgICBkYXRhLmFsbGxpbWl0dGltZXMgPSBkYXRhLmFsbGxpbWl0dGltZXMgLSBpdGVtLmJ1eW51bWJlcjsNCiAgICAgICAgICAgICAgICAgICAgLy8g6I635Y+W5bey57uP6KKr6aKE5a6a55qE5bqn5L2N5Y+3DQogICAgICAgICAgICAgICAgICAgIGxldCBzZWxlY3RBcnJheSA9IGRhdGEuc2VsZWN0ZWQ/ZGF0YS5zZWxlY3RlZC5zcGxpdCgnLCcpOltdOw0KICAgICAgICAgICAgICAgICAgICAvLyDojrflj5bnlKjmiLfpooTlrprnmoTluqfkvY3lj7cNCiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGl2ZUFycmF5ID0gaXRlbS5hZGRyZXNzLnNwbGl0KCcsJyk7DQogICAgICAgICAgICAgICAgICAgIC8vIOaWsOeahOmihOWumuW6p+S9jeWPtw0KICAgICAgICAgICAgICAgICAgICBsZXQgbmV3U2VsZWN0QXJyYXkgPSBzZWxlY3RBcnJheS5jb25jYXQoYWN0aXZlQXJyYXkpOw0KICAgICAgICAgICAgICAgICAgICAvLyDotYvlgLznu5nlj4LmlbANCiAgICAgICAgICAgICAgICAgICAgZGF0YS5zZWxlY3RlZCA9IG5ld1NlbGVjdEFycmF5LmpvaW4oJywnKTsNCiAgICAgICAgICAgICAgICAgICAgLy8g5pu05paw5bqT5a2YLOW6p+S9jeS/oeaBrw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRodHRwLnBvc3QoYCR7aXRlbS50YWJsZW5hbWV9L3VwZGF0ZWAsIGRhdGEpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOa3u+WKoOiuouWNleS/oeaBrw0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9yZGVyID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyaWQ6IG9yZGVySWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVuYW1lOiBpdGVtLnRhYmxlbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyaWQ6IHRoaXMudXNlci5pZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb29kaWQ6IGl0ZW0uZ29vZGlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2RuYW1lOiBpdGVtLmdvb2RuYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2R0eXBlOiBpdGVtLmdvb2R0eXBlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpY3R1cmU6IGl0ZW0ucGljdHVyZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXludW1iZXI6IGl0ZW0uYnV5bnVtYmVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2NvdW50cHJpY2U6IGl0ZW0ucHJpY2UsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IGl0ZW0ucHJpY2UsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWw6IGl0ZW0udG90YWwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzY291bnR0b3RhbDogaXRlbS50b3RhbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGl0ZW0uYWRkcmVzcywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1hcms6IHRoaXMucmVtYXJrLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ+acquaUr+S7mCcNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGh0dHAucG9zdCgnb3JkZXJzL2FkZCcsIG9yZGVyKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5YeP5bCR5L2Z6aKd77yM5pu05paw6K6i5Y2V54q25oCBDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Yik5pat5L2Z6aKd5piv5ZCm5YWF6LazDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE51bWJlcih0aGlzLnVzZXIubW9uZXkpIDwgTnVtYmVyKGl0ZW0ucHJpY2UgKiBpdGVtLmJ1eW51bWJlcikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5L2Z6aKd5LiN6Laz77yM6K+35YWI5YWF5YC8JywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTUwMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOivpeWVhuWTgeWtmOWcqOenr+WIhg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmpmKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXNlci5qZiA9IE51bWJlcih0aGlzLnVzZXIuamYpICsgTnVtYmVyKGRhdGEuamYgKiBpdGVtLmJ1eW51bWJlcik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXNlci5tb25leSA9IHRoaXMudXNlci5tb25leSAtIGl0ZW0ucHJpY2UgKiBpdGVtLmJ1eW51bWJlcjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmm7TmlrDnlKjmiLfkvZnpop0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRodHRwLnBvc3QoYCR7dGhpcy51c2VyVGFibGVOYW1lfS91cGRhdGVgLCB0aGlzLnVzZXIpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXIuc3RhdHVzID0gJ+W3suaUr+S7mCcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyaWQ6IG9yZGVySWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQ6IDEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kaHR0cC5nZXQoJ29yZGVycy9saXN0Jywge3BhcmFtczogcGFyYW1zfSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXIuaWQgPSByZXMuZGF0YS5kYXRhLmxpc3RbMF0uaWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRodHRwLnBvc3QoYG9yZGVycy91cGRhdGVgLCBvcmRlcikudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfotK3kubDmiJDlip8nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTUwMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlOiAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2luZGV4L3Nob3Atb3JkZXIvb3JkZXInKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgLy8g6YCJ5bqn5LiL5Y2VLOeUn+aIkOiuouWNle+8jOWHj+WwkeS9memine+8jOa3u+WKoOenr+WIhu+8jOWHj+WwkeW6k+WtmO+8jOS/ruaUueeKtuaAgeS4uuW3suaUr+S7mA0KICAgICAgICB4ekpmQ2xpY2soKSB7DQogICAgICAgICAgICAvLyDnlJ/miJDorqLljZUNCiAgICAgICAgICAgIHRoaXMudGFibGVEYXRhLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgLy8g6K6i5Y2V57yW5Y+3DQogICAgICAgICAgICAgICAgdmFyIG9yZGVySWQgPSB0aGlzLmNyZWF0ZU9yZGVyKCk7DQogICAgICAgICAgICAgICAgLy8g6I635Y+W5ZWG5ZOB6K+m5oOF5L+h5oGvDQogICAgICAgICAgICAgICAgdGhpcy4kaHR0cC5nZXQoYCR7aXRlbS50YWJsZW5hbWV9L2luZm8vJHtpdGVtLmdvb2RpZH1gKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGEuZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgLy8g5YeP5bCR5bqT5a2YDQogICAgICAgICAgICAgICAgICAgIGRhdGEuYWxsbGltaXR0aW1lcyA9IGRhdGEuYWxsbGltaXR0aW1lcyAtIGl0ZW0uYnV5bnVtYmVyOw0KICAgICAgICAgICAgICAgICAgICAvLyDojrflj5blt7Lnu4/ooqvpooTlrprnmoTluqfkvY3lj7cNCiAgICAgICAgICAgICAgICAgICAgbGV0IHNlbGVjdEFycmF5ID0gZGF0YS5zZWxlY3RlZD9kYXRhLnNlbGVjdGVkLnNwbGl0KCcsJyk6W107DQogICAgICAgICAgICAgICAgICAgIC8vIOiOt+WPlueUqOaIt+mihOWumueahOW6p+S9jeWPtw0KICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZlQXJyYXkgPSBpdGVtLmFkZHJlc3Muc3BsaXQoJywnKTsNCiAgICAgICAgICAgICAgICAgICAgLy8g5paw55qE6aKE5a6a5bqn5L2N5Y+3DQogICAgICAgICAgICAgICAgICAgIGxldCBuZXdTZWxlY3RBcnJheSA9IHNlbGVjdEFycmF5LmNvbmNhdChhY3RpdmVBcnJheSk7DQogICAgICAgICAgICAgICAgICAgIC8vIOi1i+WAvOe7meWPguaVsA0KICAgICAgICAgICAgICAgICAgICBkYXRhLnNlbGVjdGVkID0gbmV3U2VsZWN0QXJyYXkuam9pbignLCcpOw0KICAgICAgICAgICAgICAgICAgICAvLyDmm7TmlrDlupPlrZgs5bqn5L2N5L+h5oGvDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGh0dHAucG9zdChgJHtpdGVtLnRhYmxlbmFtZX0vdXBkYXRlYCwgZGF0YSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8g5re75Yqg6K6i5Y2V5L+h5oGvDQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3JkZXIgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJpZDogb3JkZXJJZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZW5hbWU6IGl0ZW0udGFibGVuYW1lLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJpZDogdGhpcy51c2VyLmlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2RpZDogaXRlbS5nb29kaWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZG5hbWU6IGl0ZW0uZ29vZG5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZHR5cGU6IGl0ZW0uZ29vZHR5cGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGljdHVyZTogaXRlbS5waWN0dXJlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1eW51bWJlcjogaXRlbS5idXludW1iZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzY291bnRwcmljZTogaXRlbS5wcmljZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmljZTogaXRlbS5wcmljZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbDogaXRlbS5wcmljZSAqIGl0ZW0uYnV5bnVtYmVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2NvdW50dG90YWw6IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogMiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiBpdGVtLmFkZHJlc3MsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtYXJrOiB0aGlzLnJlbWFyaywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICfmnKrmlK/ku5gnDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGh0dHAucG9zdCgnb3JkZXJzL2FkZCcsIG9yZGVyKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5YeP5bCR5L2Z6aKd77yM5pu05paw6K6i5Y2V54q25oCBDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Yik5pat5L2Z6aKd5piv5ZCm5YWF6LazDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE51bWJlcih0aGlzLnVzZXIuamYpIDwgTnVtYmVyKGl0ZW0uamYgKiBpdGVtLmJ1eW51bWJlcikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn56ev5YiG5LiN6LazJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTUwMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXNlci5qZiA9IHRoaXMudXNlci5qZiAtIGl0ZW0ucHJpY2UgKiBpdGVtLmJ1eW51bWJlcjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmm7TmlrDnlKjmiLfkvZnpop0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRodHRwLnBvc3QoYCR7dGhpcy51c2VyVGFibGVOYW1lfS91cGRhdGVgLCB0aGlzLnVzZXIpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXIuc3RhdHVzID0gJ+W3suaUr+S7mCcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyaWQ6IG9yZGVySWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQ6IDEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kaHR0cC5nZXQoJ29yZGVycy9saXN0Jywge3BhcmFtczogcGFyYW1zfSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXIuaWQgPSByZXMuZGF0YS5kYXRhLmxpc3RbMF0uaWQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRodHRwLnBvc3QoYG9yZGVycy91cGRhdGVgLCBvcmRlcikudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfotK3kubDmiJDlip8nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTUwMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlOiAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2luZGV4L3Nob3Atb3JkZXIvb3JkZXInKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgIGNyZWF0ZU9yZGVyKCkgew0KICAgICAgICBsZXQgb3JkZXIgPSAnJzsNCiAgICAgICAgbGV0IG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgIG9yZGVyICs9IG5vdy5nZXRGdWxsWWVhcigpOw0KICAgICAgICBvcmRlciArPSBub3cuZ2V0TW9udGgoKSArIDE7DQogICAgICAgIG9yZGVyICs9IG5vdy5nZXREYXRlKCk7DQogICAgICAgIG9yZGVyICs9IG5vdy5nZXRIb3VycygpOw0KICAgICAgICBvcmRlciArPSBub3cuZ2V0TWludXRlcygpOw0KICAgICAgICBvcmRlciArPSBub3cuZ2V0U2Vjb25kcygpOw0KICAgICAgICBvcmRlciArPSBub3cuZ2V0TWlsbGlzZWNvbmRzKCk7DQoNCiAgICAgICAgcmV0dXJuIG9yZGVyOw0KICAgICAgfQ0KICAgIH0sDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgIHRvdGFsUHJpY2UoKSB7DQogICAgICAgIGxldCB0b3RhbFByaWNlID0gMDsNCiAgICAgICAgdGhpcy50YWJsZURhdGEuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgIHRvdGFsUHJpY2UgKz0gaXRlbS5wcmljZSAqIGl0ZW0uYnV5bnVtYmVyOw0KICAgICAgICB9KTsNCg0KICAgICAgICByZXR1cm4gdG90YWxQcmljZS50b0ZpeGVkKDIpOw0KICAgICAgfSwNCiAgICAgIHRvdGFsSmlmZW4oKSB7DQogICAgICAgIGxldCB0b3RhbEppZmVuID0gMDsNCiAgICAgICAgdGhpcy50YWJsZURhdGEuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICB0b3RhbEppZmVuICs9IGl0ZW0uamYgKiB0aGlzLmJ1eW51bWJlcjsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgcmV0dXJuIHRvdGFsSmlmZW47DQogICAgICB9DQogICAgfQ0KICB9DQo="},{"version":3,"sources":["confirm.vue"],"names":[],"mappings":";AA0EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"confirm.vue","sourceRoot":"src/pages/shop-order","sourcesContent":["<template>\r\n  <div :style='{\"width\":\"100%\",\"padding\":\"20px 7% 40px\",\"margin\":\"0px auto\",\"position\":\"relative\",\"background\":\"none\"}'>\r\n    <div class=\"section-title\" :style='{\"margin\":\"10px 0\",\"fontSize\":\"20px\",\"lineHeight\":\"54px\",\"color\":\"#333\",\"textAlign\":\"center\"}'>确认下单</div>\r\n    <el-descriptions title=\"清单列表\"></el-descriptions>\r\n    <el-table\r\n      :data=\"tableData\"\r\n      style=\"width: 100%\">\r\n      <el-table-column\r\n        label=\"商品名称\">\r\n        <template slot-scope=\"scope\">\r\n          <div class=\"shangpin\">\r\n            <el-image\r\n              style=\"width: 100px; height: 100px\"\r\n              :src=\"baseUrl + scope.row.picture\"\r\n              fit=\"fill\"></el-image>\r\n            <span style=\"margin-left: 10px\">{{ scope.row.goodname }}</span>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"价格\">\r\n        <template slot-scope=\"scope\">\r\n          <span v-if=\"type == 2\">{{ scope.row.price }} 积分</span>\r\n          <span v-else><span :style='{\"fontSize\":\"12px\"}'>￥</span>{{ scope.row.price }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column v-if=\"seat==1\"\r\n        label=\"座位\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ scope.row.activeSeat }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column v-if=\"seat!=1\"\r\n        label=\"数量\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ scope.row.buynumber }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"总价\">\r\n        <template slot-scope=\"scope\">\r\n          <span v-if=\"type == 2\">{{ scope.row.price * scope.row.buynumber }} 积分</span>\r\n          <span v-else-if=\"seat==1\"><span :style='{\"fontSize\":\"12px\"}'>￥</span>{{scope.row.total}}</span>\r\n          <span v-else><span :style='{\"fontSize\":\"12px\"}'>￥</span>{{ (scope.row.price * scope.row.buynumber).toFixed(2) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div style=\"width: 100%;padding: 12px;box-sizing: border-box;display: flex;align-items: center;\">\r\n        <span style=\"width: 80px; font-size: 14px;\">备注：</span><el-input type=\"textarea\" v-model=\"remark\" placeholder=\"备注\" style=\"width: calc(100% - 80px);\"></el-input>\r\n    </div>\r\n    <div class=\"buy\" v-if=\"seat!=1 && tableData.length > 0\">\r\n      <template v-if=\"type == 2\">\r\n        <span style=\"color: red;margin-right: 10px;font-weight: 700;\">总价：{{totalPrice}} 积分</span>\r\n        <el-button type=\"warning\" @click=\"jfClick\">兑换</el-button>\r\n      </template>\r\n      <template v-else>\r\n        <span style=\"color: red;margin-right: 10px;font-weight: 700;\">总价：<span :style='{\"fontSize\":\"12px\"}'>￥</span>{{totalPrice}}</span>\r\n        <el-button type=\"success\" @click=\"payClick\">支付</el-button>\r\n      </template>\r\n    </div>\r\n    <div class=\"buy\" v-if=\"seat==1 && tableData.length > 0\">\r\n      <template v-if=\"type == 2\">\r\n        <span style=\"color: red;margin-right: 10px;font-weight: 700;\">总价：<span :style='{\"fontSize\":\"12px\"}'>￥</span>{{totalPrice}}</span>\r\n        <el-button type=\"success\" @click=\"xzJfClick\">兑换</el-button>\r\n      </template>\r\n      <template v-else>\r\n        <span style=\"color: red;margin-right: 10px;font-weight: 700;\">总价：<span :style='{\"fontSize\":\"12px\"}'>￥</span>{{totalPrice}}</span>\r\n        <el-button type=\"success\" @click=\"xzPayClick\">支付</el-button>\r\n      </template>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import config from '@/config/config'\r\n  export default {\r\n    data() {\r\n      return {\r\n        baseUrl: config.baseUrl,\r\n        userTableName: localStorage.getItem('UserTableName'),\r\n        addressList: [],\r\n        tableData: [],\r\n        currentRow: null,\r\n        radio: -1,\r\n        order: {\r\n          address: \"\",\r\n          buynumber: 0,\r\n          consignee: '',\r\n          discountprice: 0,\r\n          discounttotal: 0,\r\n          goodid: 0,\r\n          goodname: \"\",\r\n          orderid: \"\",\r\n          picture: \"\",\r\n          price: 0,\r\n          status: \"未支付\",\r\n          tablename: \"\",\r\n          tel: \"\",\r\n          total: 0,\r\n          type: 1,\r\n          userid: localStorage.getItem('userid')\r\n        },\r\n        user: {},\r\n        type: 0,\r\n        seat: 0,\r\n        buynumber: 0,\r\n        remark:''\r\n      }\r\n    },\r\n    created() {\r\n      if(this.$route.query.type != undefined) {\r\n        this.type = this.$route.query.type;\r\n      }\r\n      if(this.$route.query.seat != undefined) {\r\n        this.seat = this.$route.query.seat;\r\n      }\r\n      if(this.$route.query.tablename != undefined) {\r\n        this.order.tablename = this.$route.query.tablename;\r\n      }\r\n\r\n      this.getSession();\r\n      this.getAddrList();\r\n      // 获取商品购买的清单列表\r\n      var orderGoods = localStorage.getItem('orderGoods')\r\n      // 转换成json类型，localstorage保存的是string数据\r\n      this.tableData = JSON.parse(orderGoods);\r\n      this.type = this.$route.query.type;\r\n    },\r\n    methods: {\r\n      getSession() {\r\n        this.$http.get(`${this.userTableName}/session`, {emulateJSON: true}).then(res => {\r\n          if (res.data.code == 0) {\r\n            this.user = res.data.data;\r\n          }\r\n        });\r\n      },\r\n      getCurrentRow(index) {\r\n        this.radio = index;　\r\n      },\r\n      getAddrList() {\r\n        this.$http.get('address/list', {params: {userid: localStorage.getItem('userid')}}).then(res => {\r\n          if (res.data.code == 0) {\r\n            this.addressList = res.data.data.list;\r\n            this.addressList.forEach((item, index) => {\r\n              if (item.isdefault == '是') {\r\n                this.radio = index;\r\n              }\r\n            });\r\n          }\r\n        });\r\n      },\r\n      getCartList() {\r\n        this.$http.get('cart/list', {params: {page: 1, limit: 1000, userid: localStorage.getItem('userid')}}).then(res => {\r\n          if (res.data.code == 0) {\r\n            this.tableData = res.data.data.list;\r\n            if (this.$route.query.id != undefined || this.$route.query.type != undefined) {\r\n              this.tableData = [];\r\n              this.buynumber = this.$route.query.buynumber;\r\n              let detailObj = JSON.parse(this.$route.query.detailObj);\r\n              this.order.tablename = this.$route.query.tablename;\r\n              if (this.$route.query.type == 1) {\r\n                this.tableData.push({\r\n                  buynumber: this.buynumber,\r\n                  goodid: detailObj.id,\r\n                  picture: this.$route.query.picture,\r\n                  goodname: this.$route.query.goodname,\r\n                  goodtype: this.$route.query.goodtype,\r\n                  tablename: this.$route.query.tablename,\r\n                  userid: localStorage.getItem('userid'),\r\n                  price: this.$route.query.price\r\n                });\r\n              }\r\n              if (this.$route.query.type == 2) {\r\n                this.tableData.push({\r\n                  buynumber: this.buynumber,\r\n                  goodid: detailObj.id,\r\n                  picture: this.$route.query.picture,\r\n                  goodname: this.$route.query.goodname,\r\n                  tablename: this.$route.query.tablename,\r\n                  userid: localStorage.getItem('userid'),\r\n                  jf: detailObj.jf\r\n                });\r\n              }\r\n            }\r\n          }\r\n        });\r\n      },\r\n      handleChange(value, index, goodid) {\r\n        this.$http.get(`${this.order.tablename}/detail/${goodid}`).then(res => {\r\n          if (res.data.code == 0 && value > res.data.data.onelimittimes) {\r\n            this.tableData[index].buynumber = --value;\r\n            this.$message.error(`每人单次只能购买${res.data.data.onelimittimes}件`);\r\n          }\r\n        });\r\n      },\r\n        // 正常下单，生成订单，减少余额，添加积分，减少库存，修改状态已支付\r\n        payClick() {\r\n\r\n            // 生成订单\r\n            this.tableData.forEach(item => {\r\n                // 获取商品详情信息\r\n                this.$http.get(`${item.tablename}/info/${item.goodid}`).then(res => {\r\n                    // 订单编号\r\n                    var orderId = this.createOrder();\r\n                    let data = res.data.data;\r\n                    data.alllimittimes = data.alllimittimes - item.buynumber;\r\n                    // 更新库存信息\r\n                    this.$http.post(`${item.tablename}/update`, data).then(res => {\r\n                        // 添加订单信息\r\n                        let order = {\r\n                            orderid: orderId,\r\n                            tablename: item.tablename,\r\n                            userid: this.user.id,\r\n                            goodid: item.goodid,\r\n                            goodname: item.goodname,\r\n                            goodtype: item.goodtype,\r\n                            picture: item.picture,\r\n                            buynumber: item.buynumber,\r\n                            discountprice: item.price,\r\n                            price: item.price,\r\n                            total: item.price * item.buynumber,\r\n                            discounttotal: item.price * item.buynumber,\r\n                            type: this.type?this.type:1,\r\n                            //total: this.totalPrice,\r\n                            remark: this.remark,\r\n                            status: '未支付'\r\n                        }\r\n                        this.$http.post('orders/add', order).then(res => {\r\n                            // 减少余额，更新订单状态\r\n                            // 判断余额是否充足\r\n                            if (Number(this.user.money) < Number(item.price * item.buynumber)) {\r\n                                this.$message({\r\n                                    message: '余额不足，请先充值',\r\n                                    type: 'error',\r\n                                    duration: 1500\r\n                                });\r\n                                return\r\n                            }\r\n                            // 如果该商品存在积分\r\n                            if (data.jf) {\r\n                                this.user.jf = Number(this.user.jf) + Number(item.price * item.buynumber);\r\n                            }\r\n                            this.user.money = this.user.money - item.price * item.buynumber;\r\n                            // 更新用户余额\r\n                            this.$http.post(`${this.userTableName}/update`, this.user).then(res => {\r\n                                order.status = '已支付'\r\n                                var params = {\r\n                                    orderid: orderId,\r\n                                    page: 1,\r\n                                    limit: 1,\r\n                                }\r\n                                this.$http.get('orders/list', {params: params}).then(res => {\r\n                                    order.id = res.data.data.list[0].id;\r\n                                    this.$http.post(`orders/update`, order).then(res => {\r\n                                        // 删除购物车数据(如果是购物车下单)\r\n                                        if (item.id) {\r\n                                            this.$http.post('cart/delete', [item.id]).then(res => {});\r\n                                        }\r\n                                        this.$message({\r\n                                              message: '购买成功',\r\n                                              type: 'success',\r\n                                              duration: 1500,\r\n                                              onClose: () => {\r\n                                                this.$router.push('/index/shop-order/order');\r\n                                              }\r\n                                        });\r\n                                    });\r\n                                });\r\n                            });\r\n                        });\r\n                    });\r\n                });\r\n            });\r\n        },\r\n\r\n        // 积分兑换，生成订单，减少用户积分，减少库存\r\n        jfClick() {\r\n\r\n            // 生成订单\r\n            this.tableData.forEach(item => {\r\n                // 订单编号\r\n                var orderId = this.createOrder();\r\n                this.$http.get(`${item.tablename}/info/${item.goodid}`).then(res => {\r\n                    let data = res.data.data;\r\n                    // 减少库存\r\n                    data.alllimittimes = data.alllimittimes - item.buynumber;\r\n                    // 更新库存信息\r\n                    this.$http.post(`${item.tablename}/update`, data).then(res => {\r\n                        // 判断积分是否充足\r\n                        if (this.user.jf < this.totalPrice) {\r\n                            this.$message({\r\n                                message: '积分不足，兑换失败',\r\n                                type: 'error',\r\n                                duration: 1500\r\n                            });\r\n                            return\r\n                        }\r\n                        // 添加订单信息\r\n                        let order = {\r\n                            orderid: orderId,\r\n                            tablename: item.tablename,\r\n                            userid: this.user.id,\r\n                            goodid: item.goodid,\r\n                            goodname: item.goodname,\r\n                            goodtype: item.goodtype,\r\n                            picture: item.picture,\r\n                            buynumber: item.buynumber,\r\n                            discountprice: item.price,\r\n                            price: item.price,\r\n                            total: item.price * item.buynumber,\r\n                            discounttotal: item.price * item.buynumber,\r\n                            type: 2,\r\n                            total: this.totalPrice,\r\n                            status: '已支付'\r\n                        }\r\n                        this.$http.post('orders/add', order).then(res => {\r\n                            this.user.jf = this.user.jf - item.price * item.buynumber;\r\n                            // 更新用户余额\r\n                            this.$http.post(`${this.userTableName}/update`, this.user).then(res => {\r\n                                this.$message({\r\n                                      message: '兑换成功',\r\n                                      type: 'success',\r\n                                      duration: 1500,\r\n                                      onClose: () => {\r\n                                        this.$router.push('/index/shop-order/order');\r\n                                      }\r\n                                });\r\n                            });\r\n                        });\r\n                    });\r\n                });\r\n            });\r\n        },\r\n        // 选座下单,生成订单，减少余额，添加积分，减少库存，修改状态为已支付\r\n        xzPayClick() {\r\n            // 生成订单\r\n            this.tableData.forEach(item => {\r\n                // 订单编号\r\n                var orderId = this.createOrder();\r\n                // 获取商品详情信息\r\n                this.$http.get(`${item.tablename}/info/${item.goodid}`).then(res => {\r\n                    let data = res.data.data;\r\n                    // 减少库存\r\n                    data.alllimittimes = data.alllimittimes - item.buynumber;\r\n                    // 获取已经被预定的座位号\r\n                    let selectArray = data.selected?data.selected.split(','):[];\r\n                    // 获取用户预定的座位号\r\n                    let activeArray = item.address.split(',');\r\n                    // 新的预定座位号\r\n                    let newSelectArray = selectArray.concat(activeArray);\r\n                    // 赋值给参数\r\n                    data.selected = newSelectArray.join(',');\r\n                    // 更新库存,座位信息\r\n                    this.$http.post(`${item.tablename}/update`, data).then(res => {\r\n                        // 添加订单信息\r\n                        let order = {\r\n                            orderid: orderId,\r\n                            tablename: item.tablename,\r\n                            userid: this.user.id,\r\n                            goodid: item.goodid,\r\n                            goodname: item.goodname,\r\n                            goodtype: item.goodtype,\r\n                            picture: item.picture,\r\n                            buynumber: item.buynumber,\r\n                            discountprice: item.price,\r\n                            price: item.price,\r\n                            total: item.total,\r\n                            discounttotal: item.total,\r\n                            type: 1,\r\n                            address: item.address,\r\n                            remark: this.remark,\r\n                            status: '未支付'\r\n                        }\r\n                        this.$http.post('orders/add', order).then(res => {\r\n                            // 减少余额，更新订单状态\r\n                            // 判断余额是否充足\r\n                            if (Number(this.user.money) < Number(item.price * item.buynumber)) {\r\n                                this.$message({\r\n                                    message: '余额不足，请先充值',\r\n                                    type: 'error',\r\n                                    duration: 1500\r\n                                });\r\n                                return\r\n                            }\r\n                            // 如果该商品存在积分\r\n                            if (data.jf) {\r\n                                this.user.jf = Number(this.user.jf) + Number(data.jf * item.buynumber);\r\n                            }\r\n                            this.user.money = this.user.money - item.price * item.buynumber;\r\n                            // 更新用户余额\r\n                            this.$http.post(`${this.userTableName}/update`, this.user).then(res => {\r\n                                order.status = '已支付'\r\n                                var params = {\r\n                                    orderid: orderId,\r\n                                    page: 1,\r\n                                    limit: 1,\r\n                                }\r\n                                this.$http.get('orders/list', {params: params}).then(res => {\r\n                                    order.id = res.data.data.list[0].id;\r\n                                    this.$http.post(`orders/update`, order).then(res => {\r\n                                        this.$message({\r\n                                              message: '购买成功',\r\n                                              type: 'success',\r\n                                              duration: 1500,\r\n                                              onClose: () => {\r\n                                                this.$router.push('/index/shop-order/order');\r\n                                              }\r\n                                        });\r\n                                    });\r\n                                });\r\n                            });\r\n                        });\r\n                    });\r\n                });\r\n            });\r\n        },\r\n        // 选座下单,生成订单，减少余额，添加积分，减少库存，修改状态为已支付\r\n        xzJfClick() {\r\n            // 生成订单\r\n            this.tableData.forEach(item => {\r\n                // 订单编号\r\n                var orderId = this.createOrder();\r\n                // 获取商品详情信息\r\n                this.$http.get(`${item.tablename}/info/${item.goodid}`).then(res => {\r\n                    let data = res.data.data;\r\n                    // 减少库存\r\n                    data.alllimittimes = data.alllimittimes - item.buynumber;\r\n                    // 获取已经被预定的座位号\r\n                    let selectArray = data.selected?data.selected.split(','):[];\r\n                    // 获取用户预定的座位号\r\n                    let activeArray = item.address.split(',');\r\n                    // 新的预定座位号\r\n                    let newSelectArray = selectArray.concat(activeArray);\r\n                    // 赋值给参数\r\n                    data.selected = newSelectArray.join(',');\r\n                    // 更新库存,座位信息\r\n                    this.$http.post(`${item.tablename}/update`, data).then(res => {\r\n                        // 添加订单信息\r\n                        let order = {\r\n                            orderid: orderId,\r\n                            tablename: item.tablename,\r\n                            userid: this.user.id,\r\n                            goodid: item.goodid,\r\n                            goodname: item.goodname,\r\n                            goodtype: item.goodtype,\r\n                            picture: item.picture,\r\n                            buynumber: item.buynumber,\r\n                            discountprice: item.price,\r\n                            price: item.price,\r\n                            total: item.price * item.buynumber,\r\n                            discounttotal: 0,\r\n                            type: 2,\r\n                            address: item.address,\r\n                            remark: this.remark,\r\n                            status: '未支付'\r\n\r\n                        }\r\n                        this.$http.post('orders/add', order).then(res => {\r\n                            // 减少余额，更新订单状态\r\n                            // 判断余额是否充足\r\n                            if (Number(this.user.jf) < Number(item.jf * item.buynumber)) {\r\n                                this.$message({\r\n                                    message: '积分不足',\r\n                                    type: 'error',\r\n                                    duration: 1500\r\n                                });\r\n                                return\r\n                            }\r\n                            this.user.jf = this.user.jf - item.price * item.buynumber;\r\n                            // 更新用户余额\r\n                            this.$http.post(`${this.userTableName}/update`, this.user).then(res => {\r\n                                order.status = '已支付'\r\n                                var params = {\r\n                                    orderid: orderId,\r\n                                    page: 1,\r\n                                    limit: 1,\r\n                                }\r\n                                this.$http.get('orders/list', {params: params}).then(res => {\r\n                                    order.id = res.data.data.list[0].id;\r\n                                    this.$http.post(`orders/update`, order).then(res => {\r\n                                        this.$message({\r\n                                              message: '购买成功',\r\n                                              type: 'success',\r\n                                              duration: 1500,\r\n                                              onClose: () => {\r\n                                                this.$router.push('/index/shop-order/order');\r\n                                              }\r\n                                        });\r\n                                    });\r\n                                });\r\n                            });\r\n                        });\r\n                    });\r\n                });\r\n            });\r\n        },\r\n      createOrder() {\r\n        let order = '';\r\n        let now = new Date();\r\n        order += now.getFullYear();\r\n        order += now.getMonth() + 1;\r\n        order += now.getDate();\r\n        order += now.getHours();\r\n        order += now.getMinutes();\r\n        order += now.getSeconds();\r\n        order += now.getMilliseconds();\r\n\r\n        return order;\r\n      }\r\n    },\r\n    computed: {\r\n      totalPrice() {\r\n        let totalPrice = 0;\r\n        this.tableData.forEach(item => {\r\n            totalPrice += item.price * item.buynumber;\r\n        });\r\n\r\n        return totalPrice.toFixed(2);\r\n      },\r\n      totalJifen() {\r\n        let totalJifen = 0;\r\n        this.tableData.forEach(item => {\r\n          totalJifen += item.jf * this.buynumber;\r\n        });\r\n\r\n        return totalJifen;\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\r\n  .section {\r\n    width: 900px;\r\n    margin: 0 auto;\r\n  }\r\n\r\n  .shangpin {\r\n    display: flex;\r\n  }\r\n  .buy {\r\n    text-align: right;\r\n    padding-right: 82px;\r\n  }\r\n</style>\r\n"]}]}